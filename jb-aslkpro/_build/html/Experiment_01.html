
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Experiment 1: Gegenkopplungsverstärker und Instrumentenverstärker &#8212; ASLK Pro Experimente</title>
    
  <link href="_static/css/theme.css" rel="stylesheet" />
  <link href="_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script >const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"processClass": "tex2jax_process|mathjax_process|math|output_area"}})</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Experiment 2: Regenerative Rückgekoppelte Systeme und Design astabiler und monostabiler Kippstufen" href="Experiment_02.html" />
    <link rel="prev" title="Einleitung und Übersicht" href="intro.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/HSB_Horizontal_RGB.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">ASLK Pro Experimente</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="intro.html">
   Einleitung und Übersicht
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Experiment 1: Gegenkopplungsverstärker und Instrumentenverstärker
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Experiment_02.html">
   Experiment 2: Regenerative Rückgekoppelte Systeme und Design astabiler und monostabiler Kippstufen
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Experiment_03.html">
   Experiment 3: Integrator und Differenzierer
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Experiment_04.html">
   Kurze Theorie und Motivation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Experiment_05.html">
   Experiment 5: Self-Tuned Filter
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Experiment_06.html">
   Theorie und Motivation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Experiment_07.html">
   Grundlagen
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Experiment_08.html">
   Theorie und Motivation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Experiment_09.html">
   Kurze Theorie und Motivation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Experiment_10.html">
   Kurze Theorie und Motivation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Experiment_11.html">
   Kurze Theorie und Motivation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Experiment_12.html">
   Abstract
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Experiment_13.html">
   Kurze Theorie und Motivation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Experiment_14.html">
   Kurze Theorie und Motivation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="RedPitaya_Messautomatisierung.html">
   Einleitung
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/Experiment_01.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/executablebooks/jupyter-book"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2FExperiment_01.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#unity-gain-schaltung">
   Unity Gain - Schaltung
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#nicht-invertierende-und-invertierende-operationsverstarkerschaltungen">
   Nicht-invertierende und invertierende Operationsverstärkerschaltungen
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#messtechnische-untersuchung-der-grenzbereiche">
     Messtechnische Untersuchung der Grenzbereiche
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#bandbreite">
     Bandbreite
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#maximale-verstarkung">
     Maximale Verstärkung
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#fazit-und-beispiele">
     Fazit und Beispiele
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="experiment-1-gegenkopplungsverstarker-und-instrumentenverstarker">
<h1>Experiment 1: Gegenkopplungsverstärker und Instrumentenverstärker<a class="headerlink" href="#experiment-1-gegenkopplungsverstarker-und-instrumentenverstarker" title="Permalink to this headline">¶</a></h1>
<p>In diesem Experiment sollen drei Grundschaltungen eines Operationsverstärkers untersucht werden.
Zu diesen gehören ein:</p>
<ul class="simple">
<li><p>Impedanzwandler/Spannungsfolger</p></li>
<li><p>invertierender Verstärker</p></li>
<li><p>nicht-invertierender Verstärker.</p></li>
</ul>
<p>Grundsätzlich werden beim Schaltungsentwurf mit Operationsverstärkern (Opamps) die Eingengschaften für Handrechnungen
indealisiert. Das heißt, dass Opamps einen unendlich hohen Verstärkungfaktor und Eingangswiderstand aufweisen, sowie
eine unendlich große Bandbreite. Der Ausgangswiderstand wird mit <span class="math notranslate nohighlight">\(0\,\Omega\)</span> angenommen. Geht man in die Praxis über,
stellt man sehr schnell fest, dass alle genannten Werte endlich sind und beim Schaltungsentwurf unterschiedliche
Probleme verursachen können. Das Ziel dieses Experiments ist eine messtechnische Untersuchung der Grundschaltungen eines
Opamps und ein Gewinn an Wissen und Erfahrung beim Umgang mit diesen elektronischen Bauelementen.</p>
<div class="section" id="unity-gain-schaltung">
<h2>Unity Gain - Schaltung<a class="headerlink" href="#unity-gain-schaltung" title="Permalink to this headline">¶</a></h2>
<p>Eine Unity Gain-Schaltung, auch Impedanzwandler oder Spannungsfolger genannt, ist ein Operationsverstärker, dessen
Ausgang mit dem invertierenden Eingang kurzgeschlossen ist <a class="reference internal" href="#fig-02"><span class="std std-ref">Schematische Darstellung einer UnityGain-Schaltung.</span></a>.</p>
<div class="figure align-default" id="fig-02">
<img alt="_images/Experiment_01_fig_02.png" src="_images/Experiment_01_fig_02.png" />
<p class="caption"><span class="caption-number">Fig. 1 </span><span class="caption-text">Schematische Darstellung einer UnityGain-Schaltung.</span><a class="headerlink" href="#fig-02" title="Permalink to this image">¶</a></p>
</div>
<p>Aus der Theorie wissen wir, dass der Ausgang eines unbeschalteten Opamps gleich dem Verstärkungsfaktor <span class="math notranslate nohighlight">\(A_0\)</span> multipliziert mit der
Differenz der beiden Eingänge <span class="math notranslate nohighlight">\(U_+\)</span> und <span class="math notranslate nohighlight">\(U_-\)</span> ist. Dabei ist <span class="math notranslate nohighlight">\(U_+\)</span> der nicht-invertierende und <span class="math notranslate nohighlight">\(U_-\)</span> der invertierende Eingang des
Operationsverstärkers. Damit ergibt sich allgemein für den unbeschalteten Operationsverstärker:</p>
<div class="math notranslate nohighlight">
\[
U_{OUT} = A_0 \cdot (U_+ - U_-)
\]</div>
<p>Aufgrund der <em>Rückkopplung</em> kann der Unity Gain Verstärker als eine Regelstrecke betrachtet werden. Systemtheoretisch
ist nun das Verhältnis von Ausgang zu Eingang eine Übertragungsfunktion <span class="math notranslate nohighlight">\(H(s)\)</span> []<code class="docutils literal notranslate"><span class="pre">01_eq_02</span></code>.</p>
<div class="math notranslate nohighlight">
\[
\frac{U_{OUT}}{U_{IN}} = \frac{A_0}{1+A_0}
\]</div>
<p>Aufrund der direkten Rückkopplung (ohne andere Bauteile, Kurzschluss) kann idealisiert angenommen werden, dass <span class="math notranslate nohighlight">\(A_0\)</span>
gegen Unendlich strebt. Durch diese Annahme folgt nach dem Kürzen der []<code class="docutils literal notranslate"><span class="pre">01_eq_02</span></code> das
Übersetzungverhältnis für eine Unity Gain-Schaltung:</p>
<div class="math notranslate nohighlight">
\[
\frac{U_{OUT}}{U_{IN}} = 1
\]</div>
<p>Mit dieser Erkenntnis kann man nun den Nutzen des Unity Gain in Frage stellen. Tatsächlich ist es eine sehr nützliche
Schaltung eines Operationsverstärkers. Wie bereits erwähnt, wird diese Schaltung auch Spannungsfolger oder
Impedanzwandler genannt. Die Namen werden aus der grundlegenden Funktion dieser Schaltung abgeleitet. <strong>Ein Unity Gain
liefert am Ausgang die vom Eingang vorgegebene Spannung. Diese ist lastunabhängig.</strong> Durch diese Eigenschaft kann der
Unity Gain als Spannungsstabilisator oder als Entkoppler zweier Teilsystemen eingesetzt werden. Nach
[]<code class="docutils literal notranslate"><span class="pre">01_eq_03</span></code> ist die Übertragungsfunktion des Unity Gain gleich 1. Das heißt, dass die
Ausgangsspannung gleich der Differenz der Eingangsspannungen <span class="math notranslate nohighlight">\(U_+\)</span> und <span class="math notranslate nohighlight">\(U_-\)</span> ist. Die Simulations- und Messergebnisse
sind in der <code class="docutils literal notranslate"><span class="pre">01_fig_03</span></code>{.interpreted-text role=”numref”} (oben) dargestellt. Daraus ist ersichtlich, dass sich die
beiden Signale überlagern, was einer Übertragung von 1 entspricht.</p>
<div class="figure align-default" id="fig-03">
<img alt="_images/Amplifier_output.png" src="_images/Amplifier_output.png" />
<p class="caption"><span class="caption-number">Fig. 2 </span><span class="caption-text">Simulationen und Messungen der Ein- und Ausgangsspannungen der 3 grundlegenden Beschaltungsarten eines
Oparationsverstärkers [Unity Gain (oben), nicht-invertierender Verstärker (mitte), invertierender Verstärker (unten)]</span><a class="headerlink" href="#fig-03" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="nicht-invertierende-und-invertierende-operationsverstarkerschaltungen">
<h2>Nicht-invertierende und invertierende Operationsverstärkerschaltungen<a class="headerlink" href="#nicht-invertierende-und-invertierende-operationsverstarkerschaltungen" title="Permalink to this headline">¶</a></h2>
<p>Zwei weitere grundlegende Schaltungen des Operationsverstärkers sind die sogenannten nicht-invertierenden und
invertierenden Schaltung.</p>
<div class="figure align-default" id="fig-04">
<img alt="_images/Experiment_01_fig_03.png" src="_images/Experiment_01_fig_03.png" />
<p class="caption"><span class="caption-number">Fig. 3 </span><span class="caption-text">Nicht-invertierender (li.) und invertierender (re.) Verstärker</span><a class="headerlink" href="#fig-04" title="Permalink to this image">¶</a></p>
</div>
<p>Sowohl beim nicht-invertierenden als auch beim invertierenden Verstärker hängt der Verstärkungsfaktor <span class="math notranslate nohighlight">\(A_0\)</span> vom
Verhältnis der beiden Widerstände ab. Für den nicht-invertieren Verstärker ergibt sich:</p>
<div class="math notranslate nohighlight">
\[
\frac{U_{OUT}}{U_{IN}} = 1 + \frac{R_2}{R_1}
\]</div>
<p>Nach Ausmultiplizieren egibt sich für die Ausgangsspannung <span class="math notranslate nohighlight">\(U_{OUT}\)</span></p>
<div class="math notranslate nohighlight">
\[
U_{OUT} = U_{IN} + \frac{R_2}{R_1} \cdot U_{IN}
\]</div>
<p>Dabei ist <span class="math notranslate nohighlight">\(R_1\)</span> der Widerstand, der am invertierenden Eingang <span class="math notranslate nohighlight">\(U_-\)</span> anliegt und <span class="math notranslate nohighlight">\(R_2\)</span> der zwischen dem Ausgang <span class="math notranslate nohighlight">\(U_{OUT}\)</span> und dem
invertierenden Eingang liegt []<code class="docutils literal notranslate"><span class="pre">01_fig_04</span></code>. <span class="math notranslate nohighlight">\(U_{IN}\)</span> ist die Eingangsspannung, die an einem der Eingänge des Opamps anliegt.</p>
<p>Aus der []<code class="docutils literal notranslate"><span class="pre">01_fig_03</span></code> ist ersichtlicht, dass bei einem nicht-invertierenden Verstärker die Eingangsspannung nach
[]<code class="docutils literal notranslate"><span class="pre">01_eq_05</span></code> verstärkt wird. Die Ausgangsspannung liegt mit der Eingangsspannung in Phase.</p>
<p>Für den invertierenden Verstärker ist das Verhältnis von Ausgangsspannung zu Eingangsspannung gegeben als</p>
<div class="math notranslate nohighlight">
\[
\frac{U_{OUT}}{U_{IN}} = -\frac{R_2}{R_1}
\]</div>
<p>Nach Ausmultiplizieren ergibt sich für die Ausgangsspannung <span class="math notranslate nohighlight">\(U_{OUT}\)</span>:</p>
<div class="math notranslate nohighlight">
\[
U_{OUT} = -\frac{R_2}{R_1} \cdot U_{IN}
\]</div>
<p>Nach []<code class="docutils literal notranslate"><span class="pre">01_eq_07</span></code> bekommt man eine um <span class="math notranslate nohighlight">\(\pi\)</span> gedrehete und um das Widerstandsverhältnis verstärkte Ausgangsspannung
<span class="math notranslate nohighlight">\(U_{OUT}\)</span>. Diese ist in []<code class="docutils literal notranslate"><span class="pre">01_fig_03</span></code> (unten) graphisch dargestellt.</p>
<div class="section" id="messtechnische-untersuchung-der-grenzbereiche">
<h3>Messtechnische Untersuchung der Grenzbereiche<a class="headerlink" href="#messtechnische-untersuchung-der-grenzbereiche" title="Permalink to this headline">¶</a></h3>
<p>Wie oben beschrieben unterliegt ein Operationsverstärker physikalischen Grenzen. Diese Grenzen sollen hier untersucht werden.</p>
</div>
<div class="section" id="bandbreite">
<h3>Bandbreite<a class="headerlink" href="#bandbreite" title="Permalink to this headline">¶</a></h3>
<p>Zunächst soll die Bandbreite und ihre Abhängigkeit von der Verstärkung untersucht werden. Die kann z.B. mit Hilfe von
Red Pitaya und der sich darauf befindenden App <em>Bode-Analyser</em> durchgeführt werden. Aufgrund von unzureichender
Datenexportmöglichkeiten, wurde an dieser Stelle ein Programm zur Bode-Plot-Darstellung entwickelt. Gundsätzlich wird
das Programm zur Messautomatisierung des Red Pitayas eingesetzt und ist ohne Weiteres nur mit diesem kompatibel:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>
<span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Created on Tue Feb 12 13:16:39 2019</span>

<span class="sd">@author: Selim Cimen</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># Bitte beachten Sie die Messspitzen des Red Pitaya auf das Verhältnis 1:10 einzustellen </span>

<span class="kn">import</span> <span class="nn">time</span> 
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">redpitaya</span> <span class="kn">import</span> <span class="n">redpitaya_scpi</span> <span class="k">as</span> <span class="n">scpi</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">scipy</span> <span class="k">as</span> <span class="nn">sp</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">signal</span>


<span class="c1"># Parameter für die Messung</span>
<span class="n">Start_f</span> <span class="o">=</span> <span class="mi">10</span>             <span class="c1"># Start Frequenz der Messung </span>
<span class="n">Stop_f</span> <span class="o">=</span> <span class="mi">7000000</span>         <span class="c1"># Stop Frequenz der Messung</span>
<span class="n">Messpunkte</span> <span class="o">=</span> <span class="mi">35</span>          <span class="c1"># Anzahl der gewünschten Messpunkte</span>
<span class="n">IP</span> <span class="o">=</span> <span class="s2">&quot;192.168.111.184&quot;</span>   <span class="c1"># IP-Adresse vom Red-Pitaya</span>

<span class="n">Frequenzen</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">logspace</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">Start_f</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">Stop_f</span><span class="p">),</span> <span class="n">Messpunkte</span><span class="p">)</span>  <span class="c1"># Erzeugung Messpunkte im Frequenzbereich</span>
<span class="n">Wave_form</span> <span class="o">=</span> <span class="s1">&#39;sine&#39;</span>                                    <span class="c1"># Wellenform des Eingangssignals</span>
<span class="n">Ampl</span> <span class="o">=</span> <span class="mi">1</span>                                              <span class="c1"># Amplitude des Eingangssignals</span>
<span class="n">Downsampling</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span>                                    <span class="c1"># Downsamplingrate (decimation factor)</span>
<span class="n">Triggerverzoegerung</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span>                             <span class="c1"># Verzögerung des Triggers </span>
<span class="n">Index</span> <span class="o">=</span> <span class="mi">0</span>                                             <span class="c1"># Processvariable</span>
<span class="n">Data1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">Frequenzen</span><span class="p">))</span>                     <span class="c1"># Anlegen eines Vektors für die Messergebnisse</span>
<span class="n">Data2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">Frequenzen</span><span class="p">))</span>                     <span class="c1"># Anlegen eines Vektors für die Messergebnisse</span>

<span class="n">Name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Name der Input Textfile: &quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;.txt&quot;</span>    <span class="c1"># Eingabe des Dateiennamens</span>
<span class="c1"># Dateiname = &quot;/Users/selimcimen/Documents/Python/Analoge_Schaltungen/&quot; +Name  # Speicherpfad</span>

<span class="n">rp_s</span> <span class="o">=</span> <span class="n">scpi</span><span class="o">.</span><span class="n">scpi</span><span class="p">(</span><span class="n">IP</span><span class="p">)</span>                                  <span class="c1">#Verbindung herstellen zum Red Pitaya</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
<span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;GEN:RST&#39;</span><span class="p">)</span>                                <span class="c1">#Signal Generator reset</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
<span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;ACQ:RST&#39;</span><span class="p">)</span>                                <span class="c1">#Input reset</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">Frequenzen</span><span class="p">:</span>
    
    <span class="c1"># Signal Generieren</span>
    <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;SOUR1:FUNC &#39;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">Wave_form</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>  <span class="c1">#Wellenform sezten</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
    <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;SOUR1:VOLT &#39;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">Ampl</span><span class="p">))</span>               <span class="c1">#Amplitude setzen</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
    <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;SOUR1:FREQ:FIX &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>             <span class="c1">#Frequenz setzen</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
    <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;OUTPUT1:STATE ON&#39;</span><span class="p">)</span>                     <span class="c1">#Ausgang am Red Pitaya einschalten</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
    

    <span class="c1"># Trigger variablen sezten    </span>
    <span class="k">if</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;=</span><span class="mi">25000</span><span class="p">):</span>                                      <span class="c1">#Downsampling in Abhänigkeit der Frequenz des </span>
        <span class="n">Downsampling</span> <span class="o">=</span> <span class="s2">&quot;8&quot;</span>                              <span class="c1">#Eingangssiganls</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">1000</span><span class="p">):</span>
        <span class="n">Downsampling</span> <span class="o">=</span> <span class="s2">&quot;64&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;=</span><span class="mi">100</span><span class="p">):</span>
        <span class="n">Downsampling</span> <span class="o">=</span> <span class="s2">&quot;1024&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;=</span><span class="mi">20</span><span class="p">):</span>
        <span class="n">Downsampling</span> <span class="o">=</span> <span class="s2">&quot;8192&quot;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">i</span><span class="o">&gt;</span><span class="mi">250000</span><span class="p">):</span>
        <span class="n">Downsampling</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span>

    <span class="c1">#rp_s.tx_txt(&#39;ACQ:AVG &#39; + &quot;ON&quot;)                     #Average setzen</span>
    <span class="c1">#time.sleep(0.2)    </span>
    <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;ACQ:DEC &#39;</span> <span class="o">+</span> <span class="n">Downsampling</span><span class="p">)</span>              <span class="c1">#Downsampling setzen</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
    <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;ACQ:TRIG:LEV 0&#39;</span><span class="p">)</span>                       <span class="c1">#Triggerlevel setzen</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
    <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;ACQ:TRIG:DLY &#39;</span> <span class="o">+</span> <span class="n">Triggerverzoegerung</span><span class="p">)</span>  <span class="c1">#Verzögerung für Trigger setzen</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
    <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;ACQ:START&#39;</span><span class="p">)</span>                            <span class="c1">#Start der Messung</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
    <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;ACQ:TRIG NOW&#39;</span><span class="p">)</span>                         <span class="c1">#Signal Genarator triggern</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>

    
    <span class="c1"># Datenerfassung fuer Input 1</span>
    
    <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;ACQ:SOUR1:DATA?&#39;</span><span class="p">)</span>                                                <span class="c1">#Auslesen des Buffers auf Input 1</span>
    <span class="n">Buffstring1</span> <span class="o">=</span> <span class="n">rp_s</span><span class="o">.</span><span class="n">rx_txt</span><span class="p">()</span>                                                   <span class="c1">#Speichern der Messergebnisse</span>
    <span class="n">Buffstring1</span> <span class="o">=</span> <span class="n">Buffstring1</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="se">\n\r</span><span class="s1">\E\R\!&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;  &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>  <span class="c1">#Zeichen austauschen </span>
    <span class="n">Buff1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="n">Buffstring1</span><span class="p">)))</span>                               <span class="c1">#von String in float Vektor umwandeln </span>


    <span class="c1"># Datenerfassung fuer Input 2</span>
    <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;ACQ:SOUR2:DATA?&#39;</span><span class="p">)</span>                                                <span class="c1">#Auslesen des Buffers auf Input 2</span>
    <span class="n">Buffstring2</span> <span class="o">=</span> <span class="n">rp_s</span><span class="o">.</span><span class="n">rx_txt</span><span class="p">()</span>                                                   <span class="c1">#Speichern der Messergebnisse</span>
    <span class="n">Buffstring2</span> <span class="o">=</span> <span class="n">Buffstring2</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="se">\n\r</span><span class="s1">\E\R\!&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;  &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>  <span class="c1">#Zeichen austauschen </span>
    <span class="n">Buff2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="n">Buffstring2</span><span class="p">)))</span>                               <span class="c1">#von String in float Vektor umwandeln</span>
    
    <span class="c1"># ohne offset am Ausgang wichtig eine Variante auskommentieren!</span>
    <span class="c1">#V_in = np.array(abs(Buff1))</span>
    <span class="c1">#V_out = np.array(abs(Buff2))</span>
    <span class="c1">#V_in = sum(V_in)/16384</span>
    <span class="c1">#V_out = sum(V_out)/16384</span>
    
    <span class="c1"># mit offset am Ausgang wichtig eine Variante auskommentieren!</span>
    <span class="n">V_in</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">Buff1</span><span class="p">)</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">amin</span><span class="p">(</span><span class="n">Buff1</span><span class="p">)</span>
    <span class="n">V_out</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">Buff2</span><span class="p">)</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">amin</span><span class="p">(</span><span class="n">Buff2</span><span class="p">)</span>
    
    <span class="c1"># Amplitudengang ermitteln</span>
    <span class="n">Data1</span><span class="p">[</span><span class="n">Index</span><span class="p">]</span> <span class="o">=</span> <span class="n">V_out</span><span class="o">/</span><span class="n">V_in</span>                               <span class="c1"># Verhältnis von Ausgang zu Eingang speichern</span>
    <span class="n">Data2</span><span class="p">[</span><span class="n">Index</span><span class="p">]</span> <span class="o">=</span> <span class="mi">20</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">V_out</span><span class="o">/</span><span class="n">V_in</span><span class="p">)</span>                  <span class="c1"># Verhältnis in dB von Ausgang zu Eingang speichern</span>
    <span class="n">Index</span><span class="o">+=</span><span class="mi">1</span>                                                <span class="c1"># Processvariable um eins erhöhen</span>
    <span class="n">v</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">Index</span><span class="o">/</span><span class="n">Messpunkte</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span>                           <span class="c1"># Ermittlung des Fortschritts der Messung</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Fortschritt der Messung: &quot;</span><span class="p">,</span><span class="n">v</span><span class="p">,</span><span class="s2">&quot;%&quot;</span><span class="p">)</span>                <span class="c1"># Ausgabe des Fortschritts</span>
    
    <span class="k">if</span> <span class="p">(</span><span class="n">v</span> <span class="o">&lt;</span> <span class="mi">11</span><span class="p">):</span>                                            <span class="c1"># LED&#39;s auf dem Red Pitaya ansteuern: Statusanzeige</span>
        <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;DIG:PIN LED&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">v</span> <span class="o">&gt;</span> <span class="mi">22</span><span class="p">):</span>                                          
        <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;DIG:PIN LED&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">v</span> <span class="o">&gt;</span> <span class="mi">33</span><span class="p">):</span>                                          
        <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;DIG:PIN LED&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">v</span> <span class="o">&gt;</span> <span class="mi">44</span><span class="p">):</span>                                          
        <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;DIG:PIN LED&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">v</span> <span class="o">&gt;</span> <span class="mi">55</span><span class="p">):</span>                                          
        <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;DIG:PIN LED&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">v</span> <span class="o">&gt;</span> <span class="mi">66</span><span class="p">):</span>                                          
        <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;DIG:PIN LED&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">v</span> <span class="o">&gt;</span> <span class="mi">77</span><span class="p">):</span>                                          
        <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;DIG:PIN LED&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">v</span> <span class="o">&gt;</span> <span class="mi">88</span><span class="p">):</span>                                          
        <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;DIG:PIN LED&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">v</span> <span class="o">&gt;</span> <span class="mi">96</span><span class="p">):</span>                                          
        <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;DIG:PIN LED&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>


<span class="n">Werte</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">matrix</span><span class="p">([</span><span class="n">Frequenzen</span><span class="p">,</span><span class="n">Data1</span><span class="p">,</span><span class="n">Data2</span><span class="p">])</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>     <span class="c1"># Messfrequenzen und Messergebnisse speichern</span>
<span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">Name</span><span class="p">,</span> <span class="n">Werte</span><span class="p">)</span>                                <span class="c1"># Als Datei speichern</span>
<span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;OUTPUT1:STATE OFF&#39;</span><span class="p">)</span>                            <span class="c1"># Ausgang des Red Pitayas ausschalten</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Messung beendet&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">):</span>
    <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;DIG:PIN LED&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>      <span class="c1"># LED&#39;s ausschalten</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>

<span class="n">Data2</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">signal</span><span class="o">.</span><span class="n">medfilt</span><span class="p">(</span><span class="n">Data2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>


<span class="c1">#  Plot der Messung</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">semilogx</span><span class="p">(</span><span class="n">Frequenzen</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">Data2</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Frequency f/Hz&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Magnitude A/dB&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>Mit Hilfe des Programms konnten die Bandbreiten der jeweiligen Schaltung ermittelt werden. Um eine fundierte Aussage
über die Messgenauigkeit treffen zu können, wurden die Amplitudengänge der entsprechenden Schaltungen simuliert. Diese
sind zusammen mit den Messungen in <code class="docutils literal notranslate"><span class="pre">01_fig_06</span></code>{.interpreted-text role=”numref”} dargestellt.</p>
<div class="figure align-default" id="fig-06">
<img alt="_images/amplitudengang_messung_simulation.png" src="_images/amplitudengang_messung_simulation.png" />
<p class="caption"><span class="caption-number">Fig. 4 </span><span class="caption-text">Vergleich der Messungen mit den Simulationen</span><a class="headerlink" href="#fig-06" title="Permalink to this image">¶</a></p>
</div>
<p>Die Simulationsergebnisse zeigen prinzipiell das gleiche Tiefpassverhalten wie die Messergebnisse. Der Amplitudengang
der Messungen weicht kaum von den Simulationsergebnissen ab. Die Abweichungen liegen nur im hohen Frequenzbereich. Daher
liegen die Fehlerquellen in den kapazitiven Eigenschaften der Messspitzen und den langen Leitung. Andererseits scheinen
die Simulationsdaten des Operationsverstärkers sehr exakt zu sein, das die beiden Ergebnisse kaum von einander abweichen.</p>
<p>Mit Hilfe von <a class="reference external" href="https://de.mathworks.com/products/matlab.html">Matlab</a> können die <span class="math notranslate nohighlight">\(-3\,dB\)</span> - Grenzen der jeweiligen
gemessenen Schaltungen ermittelt werden. Es ergeben sich für:</p>
<ul class="simple">
<li><p>UnityGain = <span class="math notranslate nohighlight">\(3,16 \cdot 10^6\,Hz\)</span></p></li>
<li><p>Nichtinvertierender Verstärker = <span class="math notranslate nohighlight">\(1,05 \cdot 10^6\,Hz\)</span></p></li>
<li><p>Invertierender verstärker = <span class="math notranslate nohighlight">\(1,05 \cdot 10^6\,Hz\)</span></p></li>
</ul>
<p>Diese Information liefert eine wichtige Erkenntnis: Die Bandbreite der Operationsverstärker hängt scheinbar mit dem
Verstärkungsfaktor <span class="math notranslate nohighlight">\(A_0\)</span> zusammen. Je größer der Verstärkungsfaktor, desto schmaler ist die Bandbreite des Opamps. Diese
Erkenntniss ist wichtig für die Auslegung hochfrequenter Schaltung mit einer Verstärkung. Auf eine mathematische
Herleitung der Bandbreite wird an dieser Stelle verzichtet.</p>
</div>
<div class="section" id="maximale-verstarkung">
<h3>Maximale Verstärkung<a class="headerlink" href="#maximale-verstarkung" title="Permalink to this headline">¶</a></h3>
<p>Nun soll der Verstärkungsfakor <span class="math notranslate nohighlight">\(A_0\)</span> auf seinen maximalen und minimalen Wert untersucht werden. Abgeleitet aus
<code class="docutils literal notranslate"><span class="pre">01_eq_05</span></code>{.interpreted-text role=”eq”} und <code class="docutils literal notranslate"><span class="pre">01_eq_06</span></code>{.interpreted-text role=”eq”}, besteht die Abhängigkeit zwischen
dem Verstärkungsfaktor <span class="math notranslate nohighlight">\(A_0\)</span>, der Eigangsspannungdifferenz <span class="math notranslate nohighlight">\(U_{IN}\)</span> und der Ausgangsspannung <span class="math notranslate nohighlight">\(U_{OUT}\)</span>.</p>
<div class="math notranslate nohighlight">
\[
U_{OUT} = A_0 \cdot U_{IN}
\]</div>
<p>Da theoretisch die Eigangsspannung und der Verstärkungsfaktor variable sind, wird hier die Ausgangsspannung des Opamps
auf ihre Grenzen überprüft. Dazu wird ein DC-Sweep durchgeführt. Zu diesem Zweck wurde ein weiteres Programm erstellt</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>
<span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Created on Tue Feb 12 19:16:39 2019</span>

<span class="sd">@author: Selim Cimen</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">time</span> 
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">redpitaya</span> <span class="kn">import</span> <span class="n">redpitaya_scpi</span> <span class="k">as</span> <span class="n">scpi</span>
<span class="c1"># import matplotlib.pyplot as plt</span>


<span class="c1"># Parameter für die Messung</span>
<span class="n">Start_V</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.5</span>                                        <span class="c1"># Start Spannung der Messung </span>
<span class="n">Stop_V</span> <span class="o">=</span> <span class="mf">0.5</span>                                          <span class="c1"># Stop Spannung der Messung</span>
<span class="n">Messpunkte</span> <span class="o">=</span> <span class="mi">41</span>                                       <span class="c1"># Anzahl der gewünschten Messpunkte</span>
<span class="n">IP</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>                                      <span class="c1"># IP-Adresse vom Red-Pitaya</span>
<span class="n">Tastkopf</span> <span class="o">=</span> <span class="mi">10</span>                                         <span class="c1"># Tastkopf Verhältnis der Messspitzen</span>

<span class="n">Wave_form</span> <span class="o">=</span> <span class="s1">&#39;square&#39;</span>                                  <span class="c1"># Wellenform des Eingangssignals</span>
<span class="n">Amplituden</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">Start_V</span><span class="p">,</span> <span class="n">Stop_V</span><span class="p">,</span> <span class="n">Messpunkte</span><span class="p">)</span> <span class="c1"># Messpunkte der Amplituden</span>
<span class="n">Downsampling</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span>                                    <span class="c1"># Downsamplingrate (decimation factor)</span>
<span class="n">Triggerverzoegerung</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span>                             <span class="c1"># Verzögerung des Triggers </span>
<span class="n">Index</span> <span class="o">=</span> <span class="mi">0</span>                                             <span class="c1"># Processvariable</span>

<span class="k">if</span> <span class="p">(</span><span class="n">Start_V</span> <span class="o">&lt;</span> <span class="n">Stop_V</span><span class="p">):</span>
    <span class="n">Ampl</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">Stop_V</span><span class="o">-</span><span class="n">Start_V</span><span class="p">,</span> <span class="n">Messpunkte</span><span class="p">)</span>  <span class="c1"># Amplitude des Eingangssignals</span>
    
<span class="k">if</span> <span class="p">(</span><span class="n">Start_V</span> <span class="o">&gt;</span> <span class="n">Stop_V</span><span class="p">):</span>
    <span class="n">Ampl</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">Start_V</span><span class="o">-</span><span class="n">Stop_V</span><span class="p">,</span> <span class="n">Messpunkte</span><span class="p">)</span> <span class="c1"># Amplitude des Eingangssignals</span>
    
<span class="n">Input</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">Ampl</span><span class="p">))</span>                           <span class="c1"># Anlegen eines Input Vektors </span>
<span class="n">Output</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">Ampl</span><span class="p">))</span>                          <span class="c1"># Anlegen eines Output Vektors</span>

<span class="n">Name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Name der Input Textdatei: &quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;.txt&quot;</span>   <span class="c1"># Eingabe des Dateinamens</span>
<span class="n">Dateiname</span> <span class="o">=</span> <span class="s2">&quot;./data/&quot;</span> <span class="o">+</span> <span class="n">Name</span>                          <span class="c1"># Speicherpfad</span>

<span class="n">rp_s</span> <span class="o">=</span> <span class="n">scpi</span><span class="o">.</span><span class="n">scpi</span><span class="p">(</span><span class="n">IP</span><span class="p">)</span>                                  <span class="c1"># Verbindung herstellen zum Red Pitaya</span>
<span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;GEN:RST&#39;</span><span class="p">)</span>                                <span class="c1"># Signal Generator reset</span>
<span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;ACQ:RST&#39;</span><span class="p">)</span>                                <span class="c1"># Input reset</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">Ampl</span><span class="p">:</span>
    <span class="c1"># Signal Generieren</span>
    <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;SOUR1:FUNC &#39;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">Wave_form</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>      <span class="c1"># Wellenform sezten</span>
    
    <span class="k">if</span> <span class="p">(</span><span class="n">Start_V</span> <span class="o">&lt;</span> <span class="n">Stop_V</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">Stop_V</span><span class="p">):</span>
            <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;SOUR1:VOLT &#39;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>              <span class="c1"># Amplitude setzen</span>
            <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;SOUR1:VOLT:OFFS &#39;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">Start_V</span><span class="p">))</span>   <span class="c1"># Setzen vom Offset darf nicht kleiner/größer +-1V sein</span>
    
        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;=</span> <span class="n">Stop_V</span><span class="p">):</span>
            <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;SOUR1:VOLT &#39;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="n">Start_V</span><span class="p">))</span>           
            <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;SOUR1:VOLT:OFFS &#39;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>         

    <span class="k">if</span> <span class="p">(</span><span class="n">Start_V</span> <span class="o">&gt;</span> <span class="n">Stop_V</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;=</span> <span class="n">Start_V</span><span class="p">):</span>
            <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;SOUR1:VOLT &#39;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">Start_V</span><span class="o">-</span><span class="n">i</span><span class="p">))</span>              
            <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;SOUR1:VOLT:OFFS &#39;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>   
    
        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="n">Start_V</span><span class="p">):</span>
            <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;SOUR1:VOLT &#39;</span><span class="o">+</span> <span class="nb">str</span><span class="p">((</span><span class="n">Start_V</span><span class="o">-</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="n">Start_V</span><span class="p">))))</span>       
            <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;SOUR1:VOLT:OFFS &#39;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">Stop_V</span><span class="p">))</span>        
            
    <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;SOUR1:FREQ:FIX &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>             <span class="c1"># Frequenz setzen</span>
    <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;OUTPUT1:STATE ON&#39;</span><span class="p">)</span>                     <span class="c1"># Ausgang am Red Pitaya einschalten</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
   
    <span class="c1"># Trigger variablen sezten</span>
    <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;ACQ:DEC &#39;</span> <span class="o">+</span> <span class="n">Downsampling</span><span class="p">)</span>              <span class="c1"># Downsampling setzen</span>
    <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;ACQ:TRIG:LEV 0&#39;</span><span class="p">)</span>                       <span class="c1"># Triggerlevel setzen</span>
    <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;ACQ:TRIG:DLY &#39;</span> <span class="o">+</span> <span class="n">Triggerverzoegerung</span><span class="p">)</span>  <span class="c1"># Verzögerung für Trigger setzen</span>
    <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;ACQ:START&#39;</span><span class="p">)</span>                            <span class="c1"># Start der Messung</span>
   
    <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;ACQ:TRIG NOW&#39;</span><span class="p">)</span>                         <span class="c1"># Signal Genarator triggern</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
   
    <span class="c1"># Datenerfassung fuer Input 1</span>
    <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;ACQ:SOUR1:DATA?&#39;</span><span class="p">)</span>                                          <span class="c1"># Auslesen des Buffers auf Input 1</span>
    <span class="n">Buffstring1</span> <span class="o">=</span> <span class="n">rp_s</span><span class="o">.</span><span class="n">rx_txt</span><span class="p">()</span>                                             <span class="c1"># Speichern der Messergebnisse</span>
    <span class="n">Buffstring1</span> <span class="o">=</span> <span class="n">Buffstring1</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="se">\n\r</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;  &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>  <span class="c1"># Zeichen austauschen </span>
    <span class="n">Buff1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="n">Buffstring1</span><span class="p">)))</span>                         <span class="c1"># von String in float Vektor umwandeln</span>
    <span class="c1">#time.sleep(1)                                                          # Pause</span>

    <span class="c1"># Datenerfassung fuer Input 2</span>
    <span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;ACQ:SOUR2:DATA?&#39;</span><span class="p">)</span>                                          <span class="c1"># Auslesen des Buffers auf Input 2</span>
    <span class="n">Buffstring2</span> <span class="o">=</span> <span class="n">rp_s</span><span class="o">.</span><span class="n">rx_txt</span><span class="p">()</span>                                             <span class="c1"># Speichern der Messergebnisse</span>
    <span class="n">Buffstring2</span> <span class="o">=</span> <span class="n">Buffstring2</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="se">\n\r</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;  &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>  <span class="c1"># Zeichen austauschen </span>
    <span class="n">Buff2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="n">Buffstring2</span><span class="p">)))</span>                         <span class="c1"># von String in float Vektor umwandeln</span>
    <span class="c1">#time.sleep(1)                                                          # Pause  </span>


    <span class="n">Input</span><span class="p">[</span><span class="n">Index</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">Buff1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">Tastkopf</span><span class="o">/</span><span class="mi">16384</span><span class="p">)</span>                <span class="c1"># Messdaten vom Eingangssignal</span>
    <span class="n">Output</span><span class="p">[</span><span class="n">Index</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">Buff2</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">Tastkopf</span><span class="o">/</span><span class="mi">16384</span><span class="p">)</span>               <span class="c1"># Messdaten vom Ausgangssignal</span>


    <span class="n">Index</span> <span class="o">+=</span> <span class="mi">1</span>                                           <span class="c1"># Processvariable um eins erhöhen</span>
   
    <span class="n">v</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">Index</span><span class="o">/</span><span class="n">Messpunkte</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span>                        <span class="c1"># Ermittlung des Fortschritts der Messung</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Fortschritt der Messung: &quot;</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="s2">&quot;%&quot;</span><span class="p">)</span>           <span class="c1"># Ausgabe des Fortschritts</span>
  
<span class="n">Werte</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">matrix</span><span class="p">([</span><span class="n">Amplituden</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span><span class="p">])</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span> <span class="c1"># Messfrequenzen und Messergebnisse speichern</span>
<span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">Dateiname</span><span class="p">,</span> <span class="n">Werte</span><span class="p">)</span>                               <span class="c1"># Als Datei speichern</span>
<span class="n">rp_s</span><span class="o">.</span><span class="n">tx_txt</span><span class="p">(</span><span class="s1">&#39;OUTPUT1:STATE OFF&#39;</span><span class="p">)</span>                           <span class="c1"># Ausgang des Red Pitayas ausschalten</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Messung beendet&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Es soll mit Hilfe des nicht-invertierenden Verstärkers ein Gleichspannungsdurchlauf durchgeführt werden. Für die
Ausgangsspannung ergibt sich ein Spannungsverlauf nach <code class="docutils literal notranslate"><span class="pre">01_fig_07</span></code>{.interpreted-textrole=”numref”}.</p>
<div class="figure align-default" id="fig-07">
<img alt="_images/DCsweep.png" src="_images/DCsweep.png" />
<p class="caption"><span class="caption-number">Fig. 5 </span><span class="caption-text">Grenzmessung der Ausgangsspannung</span><a class="headerlink" href="#fig-07" title="Permalink to this image">¶</a></p>
</div>
<p>Das Ergebnis zeigt, dass die Ausgangsspannung bei ca. <span class="math notranslate nohighlight">\(9\,V\)</span> ihr Maximum und bei ca. <span class="math notranslate nohighlight">\(-9\,V\)</span> ihr Minimum
aufweist. Hier wird der Zusammenhang zwischen der Ausgangsspannung und der Versorgungsspannung des Operationsverstärkers
deutlich. Die Maximalwerte der Ausgangsspannung sind gleich der Versorgungsspannung<a class="footnote-reference brackets" href="#id2" id="id1">1</a>. Die Flankensteilheit ist
abhängig vom Verstärkungsfaktor.</p>
</div>
<div class="section" id="fazit-und-beispiele">
<h3>Fazit und Beispiele<a class="headerlink" href="#fazit-und-beispiele" title="Permalink to this headline">¶</a></h3>
<p>Mit Hilfe der durchgeführten Messungen konnten die grundlegende Funktionen und die realen Grenzen eines
Operationsverstärkers aufgezeigt werden. Der Einsatz des Red Pitaya Messlabors erwies sich für hohen Frequenzbereich
eher unzuverlässig. Des Weiteren verdrehte der Red Pitaya je nach Päriodenauflösung die Phase, sodass der Datenexport
oft fehlerhaft war. Trotzdessen ist die Möglichkeit der Messautomatisierung von großem Vorteil. Daher bietet sich der
Eisatz von SCPI-fähigen Geräten bei diesen Messungen an.</p>
<p>Als erstes Beispiel wird ein negativ rückgekoppelter Verstärker betrachtet. Prinzipiell ist das eine Kaskadierung
(Hintereinanderschaltung) der drei Grundschaltungen <code class="docutils literal notranslate"><span class="pre">01_fig_08</span></code>{.interpreted-text role=”numref”}.</p>
<div class="figure align-default" id="fig-08">
<img alt="_images/negative_feedback.png" src="_images/negative_feedback.png" />
<p class="caption"><span class="caption-number">Fig. 6 </span><span class="caption-text">Negativ-rückgekoppelter Verstärker</span><a class="headerlink" href="#fig-08" title="Permalink to this image">¶</a></p>
</div>
<p>Hier wird statt eines Sinussignals ein Rechtecksignal eingespeist. Die Ausgänge der Schaltung sind in []<code class="docutils literal notranslate"><span class="pre">01_fig_09</span></code>
graphisch dargestellt.</p>
<div class="figure align-default" id="fig-09">
<img alt="_images/Verstaerker_Rueckkopplung_neu.png" src="_images/Verstaerker_Rueckkopplung_neu.png" />
<p class="caption"><span class="caption-number">Fig. 7 </span><span class="caption-text">Messergebnisse der Ausgangsspannungen des negativ-rückgekoppelten Verstärkers</span><a class="headerlink" href="#fig-09" title="Permalink to this image">¶</a></p>
</div>
<p>Aus der Messung ist zu entnehmen, dass die bei einem Rechteckeingangssignal, die Ausgangssignale bei den Grenzübergängen
eine Abrundung aufweisen. Dieses Phänomen bezeichnet man als <a class="reference external" href="https://en.wikipedia.org/wiki/Slew_rate">Slew Rate</a> und
ist auf die kapazitive Eigeschaften des OPAMS zurück zu führen.</p>
<p>Als zweites Beispiel wird ein Instrumentenverstärker betrachtet. Dieser kann aus zwei oder drei Operationsverstärkern
vgl. [Abb.]<code class="docutils literal notranslate"><span class="pre">01_fig_10</span></code>, aufgebaut werden und wird oft, aufgrund seiner Eigenschaften, in der Medizintechnik eingesetzt.</p>
<div class="figure align-default" id="fig-10">
<img alt="_images/Instrumentenverstaerker.png" src="_images/Instrumentenverstaerker.png" />
<p class="caption"><span class="caption-number">Fig. 8 </span><span class="caption-text">Instrumentenverstärker mit drei Opamps (li.) und zwei Opamps (re.)</span><a class="headerlink" href="#fig-10" title="Permalink to this image">¶</a></p>
</div>
<p>Aus der Abbildung wird deutlich, dass die Verstärkung lediglich vom Widerstand <span class="math notranslate nohighlight">\(nR\)</span> abhängt. Dies erleichtert die
Einstellung des Instumentenverstärkers. Als Beispiel wurde ein Instrumentenverstärker aus zwei Operationsverstärkern
aufgebaut und der Ausgang gemessen. Die Messergebnisse sind in der <code class="docutils literal notranslate"><span class="pre">01_fig_11</span></code>{.interpreted-text role=”numref”}
graphisch dargestellt.</p>
<div class="figure align-default" id="fig-11">
<img alt="_images/Instrumenten.png" src="_images/Instrumenten.png" />
<p class="caption"><span class="caption-number">Fig. 9 </span><span class="caption-text">Eingangs- und Ausgangssignale eines Instrumentenverstärkers aus 2 Opamps</span><a class="headerlink" href="#fig-11" title="Permalink to this image">¶</a></p>
</div>
<p>Aufgrund der Darstellung kann festgestellt werden, dass hier die Differenz der Eingangsspannungen verstärkt wird. Dies
bezieht sich nun auf zwei Eingangssignale gegeneinander und nicht ein Signal gegen die Masse.</p>
<hr class="footnotes docutils" />
<dl class="footnote brackets">
<dt class="label" id="id2"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>Die Angaben sind aus den jeweiligen Datenblättern zu entnehmen</p>
</dd>
</dl>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            



<div class='prev-next-bottom'>
    
    <div id="prev">
        <a class="left-prev" href="intro.html" title="previous page">
            <i class="prevnext-label fas fa-angle-left"></i>
            <div class="prevnext-info">
                <p class="prevnext-label">previous</p>
                <p class="prevnext-title">Einleitung und Übersicht</p>
            </div>
        </a>
    </div>
     <div id="next">
        <a class="right-next" href="Experiment_02.html" title="next page">
            <div class="prevnext-info">
                <p class="prevnext-label">next</p>
                <p class="prevnext-title">Experiment 2: Regenerative Rückgekoppelte Systeme und Design astabiler und monostabiler Kippstufen</p>
            </div>
            <i class="prevnext-label fas fa-angle-right"></i>
        </a>
     </div>

</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By M. Meiners<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>